# =============================================================================
# Ansible Inventory - Azure Hybrid Lab
# =============================================================================
# All infrastructure managed from Ansible Controller (192.168.20.30)
# =============================================================================

all:
  children:
    # =========================================================================
    # Windows Hyper-V Host (your local PC)
    # =========================================================================
    hyperv_hosts:
      hosts:
        hyperv-host:
          ansible_host: 192.168.10.10
          ansible_user: herms
          ansible_password: "{{ vault_hyperv_password }}"
          ansible_connection: winrm
          ansible_winrm_transport: ntlm
          ansible_winrm_server_cert_validation: ignore
          ansible_port: 5985

    # =========================================================================
    # On-Prem VMs (VLAN 80) - Domain Controllers
    # =========================================================================
    domain_controllers:
      hosts:
        DC01:
          ansible_host: 192.168.80.2
          hostname: DC01
          ip: 192.168.80.2
          role: "Primary Domain Controller"
        DC02:
          ansible_host: 192.168.80.3
          hostname: DC02
          ip: 192.168.80.3
          role: "Secondary Domain Controller"
      vars:
        vm_role: domain_controller

    # =========================================================================
    # Member Servers
    # =========================================================================
    file_servers:
      hosts:
        FS01:
          ansible_host: 192.168.80.4
          hostname: FS01
          ip: 192.168.80.4
          role: "File Server"
        FS02:
          ansible_host: 192.168.80.5
          hostname: FS02
          ip: 192.168.80.5
          role: "File Server"
      vars:
        vm_role: file_server

    sql_servers:
      hosts:
        SQL01:
          ansible_host: 192.168.80.6
          hostname: SQL01
          ip: 192.168.80.6
          role: "SQL Server"
      vars:
        vm_role: sql_server

    identity_servers:
      hosts:
        AADCON01:
          ansible_host: 192.168.80.7
          hostname: AADCON01
          ip: 192.168.80.7
          role: "Entra ID Connect"
        AADPP01:
          ansible_host: 192.168.80.8
          hostname: AADPP01
          ip: 192.168.80.8
          role: "Password Protection Proxy"
        AADPP02:
          ansible_host: 192.168.80.9
          hostname: AADPP02
          ip: 192.168.80.9
          role: "Password Protection Proxy"
      vars:
        vm_role: identity_server

    web_servers:
      hosts:
        IIS01:
          ansible_host: 192.168.80.10
          hostname: IIS01
          ip: 192.168.80.10
          role: "IIS Web Server"
        IIS02:
          ansible_host: 192.168.80.11
          hostname: IIS02
          ip: 192.168.80.11
          role: "IIS Web Server"
      vars:
        vm_role: web_server

    # =========================================================================
    # Workstations (Windows 11)
    # =========================================================================
    workstations:
      hosts:
        CLIENT01:
          ansible_host: 192.168.80.12
          hostname: CLIENT01
          ip: 192.168.80.12
          role: "Windows 11 Workstation"
        CLIENT02:
          ansible_host: 192.168.80.13
          hostname: CLIENT02
          ip: 192.168.80.13
          role: "Windows 11 Workstation"
      vars:
        vm_role: workstation
        os_type: windows11

    # =========================================================================
    # Logical Groups (for playbook targeting)
    # =========================================================================

    # All member servers (non-DC)
    member_servers:
      children:
        file_servers:
        sql_servers:
        identity_servers:
        web_servers:

    # All client workstations
    client_workstations:
      children:
        workstations:

    # All on-prem VMs
    all_vms:
      children:
        domain_controllers:
        member_servers:
        client_workstations:

    # Group all Windows Servers (for common settings)
    windows_servers:
      children:
        domain_controllers:
        file_servers:
        sql_servers:
        identity_servers:
        web_servers:
      vars:
        ansible_user: Administrator
        ansible_password: "{{ vault_windows_password }}"
        ansible_connection: winrm
        ansible_winrm_transport: ntlm
        ansible_winrm_server_cert_validation: ignore
        ansible_port: 5985
        os_type: windows_server_2025

    # Group all Windows 11 clients
    windows_clients:
      children:
        workstations:
      vars:
        ansible_user: Administrator
        ansible_password: "{{ vault_windows_password }}"
        ansible_connection: winrm
        ansible_winrm_transport: ntlm
        ansible_winrm_server_cert_validation: ignore
        ansible_port: 5985

    # All on-prem infrastructure
    onprem:
      children:
        windows_servers:
        windows_clients:

    # =========================================================================
    # Azure VMs (after Terraform deployment)
    # =========================================================================
    azure_dcs:
      hosts:
        AZDC01:
          ansible_host: 10.0.2.4
          hostname: AZDC01
          ip: 10.0.2.4
          role: "Azure Primary DC"
        AZDC02:
          ansible_host: 10.0.2.5
          hostname: AZDC02
          ip: 10.0.2.5
          role: "Azure Secondary DC"
        AZRODC01:
          ansible_host: 10.0.2.6
          hostname: AZRODC01
          ip: 10.0.2.6
          role: "Azure Read-Only DC"
        AZRODC02:
          ansible_host: 10.0.2.7
          hostname: AZRODC02
          ip: 10.0.2.7
          role: "Azure Read-Only DC"
      vars:
        ansible_user: azureadmin
        ansible_password: "{{ vault_azure_admin_password }}"
        ansible_connection: winrm
        ansible_winrm_transport: ntlm
        ansible_winrm_server_cert_validation: ignore
        ansible_port: 5985
        vm_role: azure_domain_controller
