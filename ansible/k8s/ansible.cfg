# Ansible Configuration for Kubernetes Deployment
# This configuration file provides sensible defaults for the K8s playbooks

[defaults]
# Inventory file location
inventory = inventory.ini

# Disable host key checking for lab environment
# WARNING: In production, set this to True and manage known_hosts properly
host_key_checking = False

# Use stdout_callback for better output formatting
stdout_callback = yaml
bin_ansible_callbacks = True

# Increase timeout for long-running tasks (kubeadm init can take time)
timeout = 600

# Enable pipelining for better performance
pipelining = True

# Set gathering policy (smart = only when needed)
gathering = smart

# Fact caching for better performance
fact_caching = jsonfile
fact_caching_connection = /tmp/ansible_facts
fact_caching_timeout = 3600

# Retry connection on failure
retry_files_enabled = False

# Number of parallel processes
forks = 10

# Set roles path (if you create custom roles)
roles_path = ./roles

# Display skipped hosts
display_skipped_hosts = True

# Display task timing
callbacks_enabled = profile_tasks, timer

# Colored output
force_color = True

[privilege_escalation]
# Become settings (for sudo operations)
become = True
become_method = sudo
become_user = root
become_ask_pass = False

[ssh_connection]
# SSH settings for better performance and reliability
ssh_args = -o ControlMaster=auto -o ControlPersist=300s -o ServerAliveInterval=60 -o ServerAliveCountMax=5
control_path = /tmp/ansible-ssh-%%h-%%p-%%r
pipelining = True

# Use SCP instead of SFTP (better performance in most cases)
scp_if_ssh = smart
transfer_method = smart
